{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/2019-10-08--ShadowSocks的种种/","webpackCompilationHash":"e3ccd35318d60b600a81","result":{"data":{"site":{"siteMetadata":{"disqus":"sorayama"}},"post":{"html":"<h2 id=\"前言\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<p>ShadowSocks 作为科学上网工具对于我来说基本是日常生活工作的必备，此篇作为基本科普和备忘大概记录下搭建和使用中的一些坑</p>\n<h2 id=\"客户端\"><a href=\"#%E5%AE%A2%E6%88%B7%E7%AB%AF\" aria-label=\"客户端 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>客户端</h2>\n<ul>\n<li><a href=\"https://github.com/shadowsocks/ShadowsocksX-NG\">Mac 端</a></li>\n<li><a href=\"https://github.com/shadowsocks/shadowsocks-windows\">Win 端</a></li>\n<li><a href=\"https://github.com/shadowsocks/shadowsocks-android\">Android 端</a></li>\n<li><a href=\"https://apps.apple.com/jp/app/shadowrocket/id932747118\">iOS 端</a> （需要外区 Apple ID，虽然收 20 块但是比较值毕竟一直在更新维护）</li>\n</ul>\n<p>设置的话大同小异就不再赘述了</p>\n<h2 id=\"服务端部署\"><a href=\"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%83%A8%E7%BD%B2\" aria-label=\"服务端部署 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>服务端部署</h2>\n<p>在服务端有两种部署方式，可以按照自己需要来部署，一般会改默认的密码和端口，加密方式一般选择 <code class=\"language-text\">xchacha20-ietf-poly1305</code></p>\n<h3 id=\"脚本部署\"><a href=\"#%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2\" aria-label=\"脚本部署 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>脚本部署</h3>\n<blockquote>\n<p><a href=\"https://github.com/teddysun/shadowsocks_install/tree/master\">脚本 Github Repo</a></p>\n</blockquote>\n<p>这个<a href=\"https://teddysun.com/\">脚本作者</a>虽然表示已经<a href=\"https://shadowsocks.be/\">被迫弃坑</a>，但是其 Github 上的主分支依然存在，因此并不影响脚本使用只是不再更新</p>\n<p>常用的版本为 python 版，支持 CentOS，Debian 和 Ubuntu，直接上脚本</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> –no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks<span class=\"token punctuation\">\\</span>_install/master/shadowsocks.sh\n\n<span class=\"token function\">chmod</span> +x shadowsocks.sh\n\n./shadowsocks.sh <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">|</span> <span class=\"token function\">tee</span> shadowsocks.log</code></pre></div>\n<p>如安装 <code class=\"language-text\">libev</code> 或者是 <code class=\"language-text\">shadowsocksR</code> 版本只需替换文件名到该 Repo 下其他脚本文件即可，注意支持的系统版本</p>\n<h3 id=\"docker-部署\"><a href=\"#docker-%E9%83%A8%E7%BD%B2\" aria-label=\"docker 部署 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker 部署</h3>\n<p>在 <a href=\"https://github.com/teddysun/shadowsocks_install/tree/master/docker/shadowsocks-libev\">Teddysun 的 repo</a> 里同样是有 Dockerfile 部署文件，但是由于作者表示弃坑所以改用 <code class=\"language-text\">shadowsocks/shadowsocks-libev</code> 镜像 (<a href=\"https://hub.docker.com/r/shadowsocks/shadowsocks-libev\">docker hub</a>)，直接上文件</p>\n<h4 id=\"docker-composeyml\"><a href=\"#docker-composeyml\" aria-label=\"docker composeyml permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>docker-compose.yml</h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ss</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> shadowsocks/shadowsocks<span class=\"token punctuation\">-</span>libev\n    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'shadowsocks'</span>\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'10825:8388'</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'10825:8388/udp'</span>\n    <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> .env\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always</code></pre></div>\n<h4 id=\"makefile\"><a href=\"#makefile\" aria-label=\"makefile permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Makefile</h4>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\"><span class=\"token builtin\">.PHONY</span><span class=\"token punctuation\">:</span> .ONESHELL\n\n<span class=\"token builtin\">.ONESHELL</span><span class=\"token punctuation\">:</span>\n\nSHELL<span class=\"token operator\">=</span>/bin/bash\n.DEFAULT_GOAL <span class=\"token operator\">:=</span> start\n\n<span class=\"token comment\">### common</span>\n\n<span class=\"token symbol\">clean-image</span><span class=\"token punctuation\">:</span>\n\tdocker-compose down --rmi local\n<span class=\"token symbol\">prune</span><span class=\"token punctuation\">:</span>\n\tdocker image prune -f --filter until<span class=\"token operator\">=</span>240h\n\n<span class=\"token comment\">### deploy</span>\n\n<span class=\"token symbol\">clean-volume</span><span class=\"token punctuation\">:</span>\n\tdocker-compose down -v\n\nCMD<span class=\"token operator\">=</span>-h\n\n<span class=\"token symbol\">test</span><span class=\"token punctuation\">:</span>\n\tdocker-compose <span class=\"token variable\">$</span><span class=\"token punctuation\">{</span>CMD<span class=\"token punctuation\">}</span>\n\n<span class=\"token symbol\">down</span><span class=\"token punctuation\">:</span>\n\tdocker-compose down\n\n<span class=\"token symbol\">build</span><span class=\"token punctuation\">:</span>\n\tdocker-compose build\n\n<span class=\"token symbol\">up</span><span class=\"token punctuation\">:</span>\n\tdocker-compose up -d\n\n<span class=\"token symbol\">up-%</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$$</span><span class=\"token punctuation\">{</span>COMPOSE_FILE<span class=\"token punctuation\">}</span>\n\tdocker-compose up -d --no-dep <span class=\"token variable\">$*</span>\n\n<span class=\"token symbol\">start</span><span class=\"token punctuation\">:</span> down build up</code></pre></div>\n<h4 id=\"env-file\"><a href=\"#env-file\" aria-label=\"env file permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>env file</h4>\n<div class=\"gatsby-highlight\" data-language=\".env\"><pre class=\"language-.env\"><code class=\"language-.env\"># 口令\nPASSWORD=\n\n# 加密方式\nMETHOD=</code></pre></div>\n<h3 id=\"kcptun\"><a href=\"#kcptun\" aria-label=\"kcptun permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kcptun</h3>\n<p>kcptun 是一个双边加速的工具，可以将 TCP 服务的流量按照 kcp 协议的 UDP 流量发出，加速效果比较明显</p>\n<h4 id=\"服务端部署-1\"><a href=\"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%83%A8%E7%BD%B2-1\" aria-label=\"服务端部署 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>服务端部署</h4>\n<p>直接上安装脚本</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> --no-check-certificate https://github.com/kuoruan/shell-scripts/raw/master/kcptun/kcptun.sh\n\n<span class=\"token function\">chmod</span> +x ./kcptun.sh\n\n./kcptun.sh</code></pre></div>\n<p>这里注意一些参数的配置如果不是很清楚含义就默认即可，但是由于 iOS 端用 <code class=\"language-text\">shadowrocket</code> 暂不支持数据压缩所以选择参数的时候 <strong>关闭数据压缩</strong> 要选择 <code class=\"language-text\">true</code></p>\n<h4 id=\"客户端使用\"><a href=\"#%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8\" aria-label=\"客户端使用 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>客户端使用</h4>\n<ul>\n<li>\n<p>win/mac 在使用 <code class=\"language-text\">shadowsocks-windows</code> 和 <code class=\"language-text\">shadowsocks-NG-X</code> 的话设置区别不大，需要注意两点：</p>\n<ul>\n<li>端口填写成 <code class=\"language-text\">kcptun</code> 的服务端口</li>\n<li>插件名 mac 直接写 <code class=\"language-text\">kcptun</code>即可，windows 要下载相应的<a href=\"https://github.com/xtaci/kcptun/releases\">客户端</a> 之后将插件 copy 到 shadowSocks 的同级目录下，插件名填写客户端文件名（不要后缀）即可；插件选项则需要根据服务端安装脚本完成后给出的字符串填写即可</li>\n</ul>\n</li>\n<li><code class=\"language-text\">shadowrocket</code> 中的配置比较简单（虽然研究了半天都不好），现版本（2.1.34）就已经支持插件的选项，其中就包括 <code class=\"language-text\">kcptun</code>，设置的时候服务器配置部分按照正常地址和端口配置即可，插件项里的端口和地址不填则默认用填好的服务器配置，所以一般只需要改端口为 <code class=\"language-text\">kcptun</code> 的端口就行，然后其他部分的配置按照服务器的配置即可（不能有出入）</li>\n</ul>\n<h3 id=\"其他\"><a href=\"#%E5%85%B6%E4%BB%96\" aria-label=\"其他 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其他</h3>\n<h4 id=\"bbr\"><a href=\"#bbr\" aria-label=\"bbr permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BBR</h4>\n<p>Linux 发行版内核在 4.9 之后支持 BBR(Google 提供的 TCP 拥塞控制算法)以加速 TCP 连接，一些新的发新版本会自动开启。如果没有开启则确认内核版本支持之后用以下脚本方便开启</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh\n\n<span class=\"token function\">chmod</span> +x bbr.sh <span class=\"token operator\">&amp;&amp;</span> ./bbr.sh</code></pre></div>\n<h4 id=\"fast_open\"><a href=\"#fast_open\" aria-label=\"fast_open permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fast_open</h4>\n<p>也是一个 TCP 连接的拥塞控制算法，具体在第三次握手的时候可以传输数据，要求 Linux 内核高于 3.7 可以开启，具体如下</p>\n<ol>\n<li>编辑 <code class=\"language-text\">/etc/sysctl.conf</code> 添加以下命令：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"conf\"><pre class=\"language-conf\"><code class=\"language-conf\">net.ipv4.tcp_fastopen = 3</code></pre></div>\n<ol start=\"2\">\n<li>执行 <code class=\"language-text\">sysctl -p</code> 生效</li>\n<li>在 <code class=\"language-text\">/etc/rc.local</code> 中添加以下命令以持久化 (没有的话直接创建就好)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token number\">3</span> <span class=\"token operator\">></span> /proc/sys/net/ipv4/tcp_fastopen</code></pre></div>\n<h4 id=\"关于-code-classlanguage-textshadowsockscode-和-code-classlanguage-textshadowsocksrcode\"><a href=\"#%E5%85%B3%E4%BA%8E-code-classlanguage-textshadowsockscode-%E5%92%8C-code-classlanguage-textshadowsocksrcode\" aria-label=\"关于 code classlanguage textshadowsockscode 和 code classlanguage textshadowsocksrcode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>关于 <code class=\"language-text\">shadowsocks</code> 和 <code class=\"language-text\">shadowsocksR</code></h4>\n<p>本质上讲 <code class=\"language-text\">SS</code> 是原版, 而 <code class=\"language-text\">SSR</code> 是<a href=\"https://github.com/breakwa11\">破娃酱</a>的改版, 支持混淆和协议, 因此会用来做免流的伪装. 至于使用哪一个版本完全看个人喜好, 只不过需要下载相对应的客户端.</p>\n<p>具体的一些争议和趣闻参见<a href=\"https://www.itsvse.com/thread-4230-1-1.html\">传送门 A</a> 和 <a href=\"https://www.hongweiit.com/ss-and-ssr.html\">传送门 B</a> 及谷歌搜索</p>","excerpt":"前言 ShadowSocks 作为科学上网工具对于我来说基本是日常生活工作的必备，此篇作为基本科普和备忘大概记录下搭建和使用中的一些坑 客户端 Mac 端 Win 端 Android 端 iOS 端 （需要外区 Apple ID，虽然收 2…","timeToRead":7,"fields":{"slug":"/blog/2019-10-08--ShadowSocks的种种/"},"frontmatter":{"tags":["2019-10","shadowsocks","vpn"],"author":{"id":"SoraYama - 空山","bio":"折腾点前端和其他","twitter":"@ClassicSilence1","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d7657fc7ec759cfa220ac058ed0b571a/7ca4f/avatar.jpg","srcSet":"/static/d7657fc7ec759cfa220ac058ed0b571a/7ca4f/avatar.jpg 1x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/236eb/avatar.jpg 1.5x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/30e6d/avatar.jpg 2x"}}]}},"title":"ShadowSocks的种种","updatedDate":"Oct 8, 2019","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/1ce0d1cd7e1d0637a29faca7d03ee87a/02c80/shadowsocks.jpg","srcSet":"/static/1ce0d1cd7e1d0637a29faca7d03ee87a/02c80/shadowsocks.jpg 1x"}}]}}},"recents":{"edges":[{"node":{"fields":{"slug":"/blog/2019-10-16--使用阿里云OSS+Docker搭建Nextcloud/"},"timeToRead":7,"frontmatter":{"title":"使用阿里云OSS+Docker搭建Nextcloud","updatedDate":"2019-10-16","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/1bb99f288b731ba8e714fc91933b88eb/37089/nextcloud.jpg","srcSet":"/static/1bb99f288b731ba8e714fc91933b88eb/37089/nextcloud.jpg 1x,\n/static/1bb99f288b731ba8e714fc91933b88eb/4a855/nextcloud.jpg 1.5x,\n/static/1bb99f288b731ba8e714fc91933b88eb/92aae/nextcloud.jpg 2x"}}]},"author":{"avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg","srcSet":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg 1x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/1a035/avatar.jpg 1.5x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/74d54/avatar.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2018-07-29--misc/"},"timeToRead":5,"frontmatter":{"title":"Misc","updatedDate":"2019-07-30","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/98bc53d2012296d56b37cad2ff328b5a/37089/cup-of-coffee-laptop-office-macbook-89786.jpg","srcSet":"/static/98bc53d2012296d56b37cad2ff328b5a/37089/cup-of-coffee-laptop-office-macbook-89786.jpg 1x,\n/static/98bc53d2012296d56b37cad2ff328b5a/4a855/cup-of-coffee-laptop-office-macbook-89786.jpg 1.5x,\n/static/98bc53d2012296d56b37cad2ff328b5a/92aae/cup-of-coffee-laptop-office-macbook-89786.jpg 2x"}}]},"author":{"avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg","srcSet":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg 1x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/1a035/avatar.jpg 1.5x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/74d54/avatar.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2019-07-03--前端面试汇总/"},"timeToRead":28,"frontmatter":{"title":"前端面试汇总(持续更新)","updatedDate":"2019-07-28","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/509f7cfdd1a14bf357f75a03cde10624/37089/fe.jpg","srcSet":"/static/509f7cfdd1a14bf357f75a03cde10624/37089/fe.jpg 1x,\n/static/509f7cfdd1a14bf357f75a03cde10624/4a855/fe.jpg 1.5x,\n/static/509f7cfdd1a14bf357f75a03cde10624/92aae/fe.jpg 2x"}}]},"author":{"avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg","srcSet":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg 1x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/1a035/avatar.jpg 1.5x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/74d54/avatar.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2018-07-29--Gatsby-and-Travis/"},"timeToRead":5,"frontmatter":{"title":"用 gatsby 和 travis-ci 自动化构建和部署 github-pages","updatedDate":"2018-07-29","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/c44bca7fd6ad9ad38985ba07e1a3b252/37089/gatsby-word.jpg","srcSet":"/static/c44bca7fd6ad9ad38985ba07e1a3b252/37089/gatsby-word.jpg 1x,\n/static/c44bca7fd6ad9ad38985ba07e1a3b252/4a855/gatsby-word.jpg 1.5x,\n/static/c44bca7fd6ad9ad38985ba07e1a3b252/92aae/gatsby-word.jpg 2x"}}]},"author":{"avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg","srcSet":"/static/d7657fc7ec759cfa220ac058ed0b571a/29d9a/avatar.jpg 1x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/1a035/avatar.jpg 1.5x,\n/static/d7657fc7ec759cfa220ac058ed0b571a/74d54/avatar.jpg 2x"}}]}}}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2019-10-08--ShadowSocks的种种/"}}}